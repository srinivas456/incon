Installation Steps for Ruby on Rails with RVM in development environment¶

Install basic packages for Ubuntu

    sudo apt-get install build-essential
    sudo apt-get install zlib1g-dev
    sudo apt-get install libssl-dev
    sudo apt-get install gcc autoconf
    sudo apt-get install libreadline5-dev
    sudo apt-get install libxml2-dev
    sudo apt-get install libxslt1-dev

    - Required at the time of nginx installation
    sudo apt-get install libcurl4-openssl-dev

Setup Git Server

    sudo apt-get install git-core
    nano .gitconfig
    ---
    [color]
    branch = auto
    diff = auto
    interactive = auto
    status = auto
    [user]
    name = firstname.lastname
    email = first.last@icicletech.com
    [merge]
    tool = diffmerge
    ----

Add following lines in .gemrc file

    nano .gemrc
    gem: --no-ri --no-rdoc

Setup Sublime Text Editor

    sudo add-apt-repository ppa:webupd8team/sublime-text-2
    sudo apt-get update
    sudo apt-get install sublime-text-2

Setup RVM

    Installing RVM Pre-Requisites

        sudo apt-get install curl

    Install RVM

        bash < <(curl -s https://rvm.beginrescueend.com/install/rvm)

        echo ' -s "$HOME/.rvm/scripts/rvm" && . "$HOME/.rvm/scripts/rvm" # Load RVM function' >> ~/.bash_profile

    Reload Bash Profile

        source .bash_profile

    For Ubuntu 11.04

        gedit ~/.bashrc

        Then look for this at the end of the file (if it's not there, copy it in):

[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into a shell session *as a function* 

    Reload Bash Profile

        source ~/.bashrc

    To set additional settings

        nano .rvmrc
        type rvm | head -1
        rvm notes

    Find available Rubies

        rvm list known

    Install basic libraries

        sudo apt-get install build-essential bison openssl libreadline5 libreadline5-dev curl git-core zlib1g zlib1g-dev libssl-dev libsqlite3-0 libsqlite3-dev sqlite3 libxml2-dev
        sudo apt-get install libcurl4-openssl-dev
        rvm pkg install zlib

    Need to install rvm readline package

        rvm pkg install readline

    Install Ruby 1.9.2 (Or any other Ruby) or

        rvm install 1.9.2-p290

    Install Passenger (Not needed now as of Passenger 3)

        rvm 1.9.2 --passenger
        rvm 1.9.2
        rvm get head

    Make 1.9.2-p290 default

        rvm use 1.9.2-p290 --default

Install Passenger

    gem install passenger
    rvmsudo passenger-install-nginx-module

    Change Nginx Conf

sudo nano /opt/nginx/conf/nginx.conf

    This may not be required for Passenger 3. ‘For Nginx users, replace the passenger_ruby line with:’

--
passenger_ruby /home/<user>/.rvm/bin/passenger_ruby;

Nginx Startup Setup

    mkdir software
    cd software
    git clone git://github.com/jnstq/rails-nginx-passenger-ubuntu.git
    sudo mv rails-nginx-passenger-ubuntu/nginx/nginx /etc/init.d/nginx
    sudo ln -s /etc/init.d/nginx /usr/local/bin/nginx
    sudo update-rc.d nginx defaults

Nginx Configuration to setup new rails application


nginx.conf file

    server {
    listen 80;
    server_name www.bla.com;
    root /home/icicle/bla/public;
    passenger_enabled on;
    rails_env development;
    }

Install bundler

    gem install bundler

Install Rails

    gem install rails

Installing Postgresql

    sudo apt-get install python-software-properties
    sudo add-apt-repository ppa:pitti/postgresql
    sudo apt-get update
    sudo apt-get upgrade
    sudo apt-get install postgresql-9.0 libpq-dev
    sudo apt-get install postgresql-server-dev-9.0

    Postgres uses Linux users as the normal users. Create user from Command prompt

        sudo -u postgres createuser postgresuser
        Shall the new role be a superuser? (y/n) n
        Shall the new role be allowed to create databases? (y/n) y
        Shall the new role be allowed to create more new roles? (y/n) n

    Install Postgres Gem

        gem install pg

    Incase of error ‘FATAL: Ident authentication failed for user ‘ , on development machine (Not on production!)

        sudo nano /etc/postgresql/9.0/main/pg_hba.conf
        Change => local all all ident
        To => local all all trust

    Change Postgres User Password

        First login to postgres

            sudo -u postgres psql

        Change the password

            ALTER USER <Postgresuser> WITH PASSWORD '<newpassword>';

Installing MYSQL

    sudo apt-get install mysql-server
    sudo apt-get install libmysql-ruby
    sudo apt-get install mysql-client
    sudo apt-get install mysql-devel




